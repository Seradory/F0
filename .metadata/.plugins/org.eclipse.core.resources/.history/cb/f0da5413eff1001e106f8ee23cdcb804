/*
 * pwm.h
 *
 *  Created on: Apr 3, 2024
 *      Author: alise
 */
#include "main.h"
#ifndef SRC_PWM_H_
#define SRC_PWM_H_

 void start_pwm(uint32_t frequency, uint32_t duty_cycle) {
      // PWM frekansı ve duty cycle ayarları
	  htim3.Instance->ARR = HAL_RCC_GetPCLK1Freq() / frequency - 1;
	  htim3.Instance->CCR1 = (duty_cycle * (htim3.Instance->ARR + 1)) / 100;

      // PWM başlatma
      HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_2);
  }

  // PWM durdurma fonksiyonu
  void stop_pwm() {
	  //HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_2);
	  HAL_TIM_PWM_Stop(&htim3, TIM_CHANNEL_2);
  }


#endif /* SRC_PWM_H_ */
